# 进程调度基本介绍

## 1、调度指标

周转时间

T<sub>周转时间</sub>=T<sub>完成时间</sub>-T<sub>到达时间</sub>

如果所有任务在同一时间到达，那么 T<sub>完成时间</sub> = 0，T<sub>周转时间</sub> = T<sub>完成时间</sub>



## 2、先进先出(FIFO)

(1) 假设有 3 个工作 A，B和C在大致在同一时间到达，A 比 B 早一点，B 比 C 早一点，假设每个工作的运行 10s，计算周转时间？

(10+20+30)/3=20



(2) 同(1)，不过这次 A 运行 100s，B和C运行10秒，计算周转时间？

(100+110+120)/3=110

![截屏2021-07-15 上午10.51.35](https://raw.githubusercontent.com/wangjunstf/pics/main/uPic/%E6%88%AA%E5%B1%8F2021-07-15%20%E4%B8%8A%E5%8D%8810.51.35.png)





在 (2) 中，周转时间显著增长，这种问题称为护航效应(convoy effect)，一些耗时较少的潜在资源消费者被排在耗时较长的重量级资源消费者之后。



## 2、最短任务优先(SJF)

先运行最短的任务，然后是次短的任务。

(1) 假设有 3 个工作 A，B和C在大致在同一时间到达，A 比 B 早一点，B 比 C 早一点，假设每个工作的运行 10s，计算周转时间？

(10+20+120)/3=50s



(2) 还是(1)中例子，不过此时A先到达，B和C在 t=10 到达。

(100+(110-10)+(120-10))/3= 103.33

这里还是会遭遇护航问题。

![截屏2021-07-15 上午11.27.10](/Users/wangjun/Desktop/截图/截屏2021-07-15 上午11.27.10.png)



## 3、最短完成时间优先(STCF)

将 SJF 添加抢占特性，成为最短完成时间优先(Shortest Time-to-Completion First, STCF)或抢占式最短作业优先(Preemptive Shortest Job First, PSJF)。这种调度程序称为抢占式调度程序。

3.1 假设有 3 个工作 A，B和C在大致在同一时间到达，A先到达，B和C在 t=10 到达，计算周转时间？

((20-10)+(30-10)+120)/3=50s，可见平均周转时间大大提高了。

<img src="/Users/wangjun/Library/Application Support/typora-user-images/截屏2021-07-15 上午11.28.19.png" alt="截屏2021-07-15 上午11.28.19" style="zoom:67%;" />



假设工作必须保持运行直到完成，这时STCF是最优的，如果考虑所有工作同时到达，SJF 是最优的。



## 4、新度量指标：响应时间

自从引入了分时系统，现在，用户将会坐在终端前面，这时要求系统的交互性好，即能在最短时间内获得响应。因此，一个新的度量标准诞生了：响应时间(response time)

T<sub>响应时间</sub>=T<sub>首次运行时间</sub>-T<sub>到达时间</sub>

例如： 使用 3.1 的作业，A 在时间 0 到达，B 和 C 在时间 10 到达。每个作业的响应时间如下：作业 A 为 0，作业 B 为 0，作业 C 为10(平均: 3.33)

STCF 和相关方法在响应时间上并不是很好，例如，如果 3 个工作同时到达，第 3 个工做必须等待前两个工作全部运行后才能运行。



## 5、轮转

通常称为轮转(Round-Robin，RR)调度。其基本思想是：RR 在一个时间片(time slice)内运行一个工作，然后切换到运行队列的下一个任务，而不是运行一个任务直到结束。它反复执行，直到所有任务完成。RR 有时被称为时间片(time-slicing)。时间片长度必须是时钟中断周期的倍数。如果时钟中断是每 10ms 中断一次



